---
tags:
  - Face Recognition
summary: 단체 사진 업로드 및 얼굴 인식 후 등록
description: >
  단체 사진을 업로드하여 얼굴 인식 및 임베딩 추출 후,
  공유 그룹에 등록된 얼굴 벡터와 비교하여 매칭된 사람들을 자동 등록합니다.
  이미지 파일은 Presigned URL을 통해 S3에 업로드되며,
  최종 등록은 DB 서버의 `/photos/{shareGroupId}`로 전송됩니다.
consumes:
  - multipart/form-data
parameters:
  - in: formData
    name: image
    type: file
    required: true
    description: 단체 사진 파일 (jpg/jpeg/png)
  - in: formData
    name: shareGroupId
    type: integer
    required: true
    description: 공유 그룹 ID
  - in: formData
    name: location
    type: string
    required: true
    description: 촬영 위치 정보
  - in: formData
    name: takeAt
    type: string
    required: true
    description: 촬영 시간 (예 2025-04-01T12:00:00)

security:
  - Bearer: []

responses:
  200:
    description: 사진 등록 성공
    schema:
      type: object
      properties:
        message:
          type: string
        matchedProfiles:
          type: array
          items:
            type: object
            properties:
              memberId:
                type: integer
              profileId:
                type: integer
              name:
                type: string
              angleType:
                type: string
              distance:
                type: number
        imageUrl:
          type: string
        uploadResult:
          type: object
          properties:
            status:
              type: integer
            code:
              type: string
            data:
              type: object
              properties:
                uploaderProfileId:
                  type: integer
                uploadPhotoList:
                  type: array
                  items:
                    type: object
                    properties:
                      photoId:
                        type: integer
                      imageUrl:
                        type: string
                      profileIdList:
                        type: array
                        items:
                          type: integer

  400:
    description: 잘못된 요청
  401:
    description: 인증 실패
  404:
    description: 매칭 실패
  500:
    description: 서버 내부 오류